<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forgeheart ‚Äî Daggerheart Adversary Tools</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Forgeheart is a free tool for creating and converting adversaries for Daggerheart. Build encounters, manage your collection, and share with the community.">
  <meta name="keywords" content="Daggerheart, adversary, converter, encounter builder, TTRPG, tabletop RPG, GM tools, Darrington Press">
  <meta name="author" content="Forgeheart">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://forgeheart.us/">
  <meta property="og:title" content="Forgeheart ‚Äî Daggerheart Adversary Tools">
  <meta property="og:description" content="Create, convert, and share Daggerheart adversaries. Free tools for GMs including an encounter builder and community library.">
  <meta property="og:image" content="https://forgeheart.us/og-image.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://forgeheart.us/">
  <meta name="twitter:title" content="Forgeheart ‚Äî Daggerheart Adversary Tools">
  <meta name="twitter:description" content="Create, convert, and share Daggerheart adversaries. Free tools for GMs including an encounter builder and community library.">
  <meta name="twitter:image" content="https://forgeheart.us/og-image.png">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://forgeheart.us/">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

  <!-- Google Fonts - Daggerheart-inspired typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto+Slab:wght@400;500;700&family=Source+Sans+3:ital,wght@0,400;0,600;0,700;0,900;1,400&display=swap" rel="stylesheet">
  <!-- Theme detection (prevents flash of wrong theme) -->
  <script>
    (function() {
      var saved = localStorage.getItem('dnd-dh-theme');
      var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (saved === 'light' || (!saved && !prefersDark)) {
        document.documentElement.classList.add('light-mode');
      }
    })();
  </script>

  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <a href="#main-content" class="sr-only">Skip to main content</a>

  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="navbar-inner">
      <a href="#" class="navbar-brand" onclick="navigateTo('converter'); return false;">
        <img src="/assets/forgeheart.svg" alt="Forgeheart" class="navbar-logo">
        <span>Forgeheart</span>
      </a>

      <!-- Mobile hamburger menu button - positioned right after brand for mobile layout -->
      <button class="hamburger-btn" onclick="toggleMobileMenu()" aria-label="Open menu" aria-expanded="false">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>

      <div class="navbar-nav">
        <a href="#" class="nav-link active" data-page="converter" onclick="navigateTo('converter'); return false;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
          </svg>
          <span>Forge</span>
        </a>
        <a href="#" class="nav-link" data-page="myLibrary" onclick="navigateTo('myLibrary'); return false;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
            <line x1="12" y1="6" x2="12" y2="12"/>
            <line x1="9" y1="9" x2="15" y2="9"/>
          </svg>
          <span>Collection</span>
        </a>
        <a href="#" class="nav-link" data-page="community" onclick="navigateTo('community'); return false;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
          <span>Community</span>
        </a>
        <a href="#" class="nav-link" data-page="encounter-builder" onclick="navigateTo('encounter-builder'); return false;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
            <rect x="3" y="14" width="7" height="7"/>
          </svg>
          <span>Encounters</span>
        </a>
        <a href="#" class="nav-link" data-page="leaderboard" onclick="navigateTo('leaderboard'); return false;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M8 21V12H4v9h4z"/>
            <path d="M14 21V8h-4v13h4z"/>
            <path d="M20 21V4h-4v17h4z"/>
          </svg>
          <span>Leaderboard</span>
        </a>
        <a href="#" class="nav-link admin-only hidden" id="adminNavLink" data-page="admin" onclick="navigateTo('admin'); return false;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 15v2"/>
            <path d="M12 11v.01"/>
            <path d="M3 21h18"/>
            <path d="M5 21V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16"/>
            <path d="M9 21v-4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v4"/>
          </svg>
          <span>Admin</span>
        </a>
      </div>

      <div class="navbar-right">
        <button class="faq-link" onclick="openFAQModal()" title="How It Works">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
            <circle cx="12" cy="17" r="0.5" fill="currentColor"/>
          </svg>
        </button>
        <a href="https://buymeacoffee.com/marcusu" target="_blank" rel="noopener" class="coffee-link" title="Buy me a coffee">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <path d="M17 8h1a4 4 0 1 1 0 8h-1"/>
            <path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/>
            <line x1="6" y1="2" x2="6" y2="4"/>
            <line x1="10" y1="2" x2="10" y2="4"/>
            <line x1="14" y1="2" x2="14" y2="4"/>
          </svg>
        </a>
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle light/dark mode" title="Toggle theme">
          <span class="theme-icon-dark" aria-hidden="true">‚òÄÔ∏è</span>
          <span class="theme-icon-light" aria-hidden="true">üåô</span>
        </button>
        <div id="authSection">
          <!-- Auth UI populated by JavaScript -->
        </div>
      </div>
    </div>
  </nav>

  <!-- Mobile Slide-out Menu -->
  <div class="mobile-menu-overlay" onclick="closeMobileMenu()"></div>
  <div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-header">
      <img src="/assets/forgeheart.svg" alt="Forgeheart" class="mobile-menu-logo">
      <span>Forgeheart</span>
      <button class="mobile-menu-close" onclick="closeMobileMenu()" aria-label="Close menu">&times;</button>
    </div>
    <nav class="mobile-menu-nav">
      <a href="#" class="mobile-menu-link active" data-page="converter" onclick="navigateTo('converter'); closeMobileMenu(); return false;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
        </svg>
        Forge
      </a>
      <a href="#" class="mobile-menu-link" data-page="myLibrary" onclick="navigateTo('myLibrary'); closeMobileMenu(); return false;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
          <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
        </svg>
        Collection
      </a>
      <a href="#" class="mobile-menu-link" data-page="community" onclick="navigateTo('community'); closeMobileMenu(); return false;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
        Community
      </a>
      <a href="#" class="mobile-menu-link" data-page="encounter-builder" onclick="navigateTo('encounter-builder'); closeMobileMenu(); return false;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"/>
          <rect x="14" y="3" width="7" height="7"/>
          <rect x="14" y="14" width="7" height="7"/>
          <rect x="3" y="14" width="7" height="7"/>
        </svg>
        Encounter Builder
      </a>
      <a href="#" class="mobile-menu-link" data-page="leaderboard" onclick="navigateTo('leaderboard'); closeMobileMenu(); return false;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M8 21V12H4v9h4z"/>
          <path d="M14 21V8h-4v13h4z"/>
          <path d="M20 21V4h-4v17h4z"/>
        </svg>
        Leaderboard
      </a>
      <a href="#" class="mobile-menu-link admin-only hidden" id="adminMobileLink" data-page="admin" onclick="navigateTo('admin'); closeMobileMenu(); return false;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 15v2"/>
          <path d="M12 11v.01"/>
          <path d="M3 4h18v16H3z"/>
          <path d="M3 8h18"/>
        </svg>
        Admin
      </a>
    </nav>
    <div class="mobile-menu-footer">
      <!-- Auth section for mobile -->
      <div id="mobileAuthSection" class="mobile-auth-section">
        <!-- Populated by JavaScript -->
      </div>

      <button class="mobile-menu-link" onclick="toggleTheme(); closeMobileMenu();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        Toggle Theme
      </button>
      <button class="mobile-menu-link" onclick="openFAQModal(); closeMobileMenu();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
          <circle cx="12" cy="17" r="0.5" fill="currentColor"/>
        </svg>
        How It Works
      </button>
      <a href="https://buymeacoffee.com/marcusu" target="_blank" rel="noopener" class="mobile-menu-link">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 8h1a4 4 0 1 1 0 8h-1"/>
          <path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/>
          <line x1="6" y1="2" x2="6" y2="4"/>
          <line x1="10" y1="2" x2="10" y2="4"/>
          <line x1="14" y1="2" x2="14" y2="4"/>
        </svg>
        Buy Me a Coffee
      </a>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="login-modal hidden" onclick="closeLoginModal(event)">
    <div class="login-modal-content" onclick="event.stopPropagation()">
      <div class="login-modal-header">
        <h2>Welcome Back</h2>
        <p>Sign in to share conversions and vote</p>
      </div>
      <div class="login-modal-body">
        <a href="/auth/discord" class="btn-sso discord">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M20.317 4.492c-1.53-.69-3.17-1.2-4.885-1.49a.075.075 0 0 0-.079.036c-.21.369-.444.85-.608 1.23a18.566 18.566 0 0 0-5.487 0 12.36 12.36 0 0 0-.617-1.23A.077.077 0 0 0 8.562 3c-1.714.29-3.354.8-4.885 1.491a.07.07 0 0 0-.032.027C.533 9.093-.32 13.555.099 17.961a.08.08 0 0 0 .031.055 20.03 20.03 0 0 0 5.993 2.98.078.078 0 0 0 .084-.026c.462-.63.874-1.295 1.226-1.963a.074.074 0 0 0-.041-.104 13.201 13.201 0 0 1-1.872-.878.075.075 0 0 1-.008-.125c.126-.093.252-.19.372-.287a.075.075 0 0 1 .078-.01c3.927 1.764 8.18 1.764 12.061 0a.075.075 0 0 1 .079.009c.12.098.245.195.372.288a.075.075 0 0 1-.006.125c-.598.344-1.22.635-1.873.877a.075.075 0 0 0-.041.105c.36.687.772 1.341 1.225 1.962a.077.077 0 0 0 .084.028 19.963 19.963 0 0 0 6.002-2.981.076.076 0 0 0 .032-.054c.5-5.094-.838-9.52-3.549-13.442a.06.06 0 0 0-.031-.028zM8.02 15.278c-1.182 0-2.157-1.069-2.157-2.38 0-1.312.956-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.956 2.38-2.157 2.38zm7.975 0c-1.183 0-2.157-1.069-2.157-2.38 0-1.312.955-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.946 2.38-2.157 2.38z"/>
          </svg>
          Continue with Discord
        </a>
      </div>
      <div class="login-modal-footer">
        By signing in, you agree to share your creations with the community.
      </div>
    </div>
  </div>

  <!-- Keyboard Shortcuts Modal -->
  <div id="keyboardModal" class="modal-overlay hidden" onclick="closeKeyboardModal(event)">
    <div class="modal-content keyboard-modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2>Keyboard Shortcuts</h2>
        <button class="modal-close" onclick="closeKeyboardModal()" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="shortcut-section">
          <h3>Converter</h3>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>Enter</kbd><span>Convert stat block</span></div>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>C</kbd><span>Copy JSON</span></div>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>Z</kbd><span>Undo</span></div>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>Y</kbd><span>Redo</span></div>
          <div class="shortcut-row"><kbd>Esc</kbd><span>Clear all</span></div>
        </div>
        <div class="shortcut-section">
          <h3>Navigation</h3>
          <div class="shortcut-row"><kbd>?</kbd><span>Show this help</span></div>
          <div class="shortcut-row"><kbd>Esc</kbd><span>Close modals</span></div>
        </div>
        <div class="shortcut-section">
          <h3>Accessibility</h3>
          <div class="shortcut-row"><kbd>Tab</kbd><span>Navigate elements</span></div>
          <div class="shortcut-row"><kbd>Enter</kbd>/<kbd>Space</kbd><span>Activate buttons</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Filter Multi-Select Modal -->
  <div id="filterModal" class="modal-overlay hidden" onclick="closeFilterModal(event)">
    <div class="modal-content filter-modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2 id="filterModalTitle">Select Tiers</h2>
        <button class="modal-close" onclick="closeFilterModal()" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="filter-options" id="filterOptions">
          <!-- Options populated by JS -->
        </div>
      </div>
      <div class="modal-footer filter-modal-footer">
        <button class="btn btn-secondary btn-small" onclick="clearFilterSelection()">Clear All</button>
        <button class="btn btn-primary btn-small" onclick="applyFilter()">Apply</button>
      </div>
    </div>
  </div>

  <!-- Converter Page -->
  <div id="converterPage" class="page-view active">
    <div class="container">
      <!-- Landing State: Choice between Convert or Create -->
      <div id="converterLanding" class="converter-landing">
        <header class="page-header">
          <img src="/assets/forgeheart.svg" alt="" class="hero-icon" aria-hidden="true">
          <h1>The Forge</h1>
          <p class="subtitle">Craft adversaries for your Daggerheart campaign</p>
          <button class="btn btn-secondary btn-how-it-works" onclick="openFAQModal()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
            How It Works
          </button>
        </header>

        <div class="converter-choice-grid">
          <button class="converter-choice-card" onclick="enterConverterMode('convert')">
            <div class="choice-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
                <path d="m15 5 4 4"/>
              </svg>
            </div>
            <h2>Convert</h2>
            <p>Transform creatures from other TTRPGs into Daggerheart stat blocks</p>
          </button>

          <button class="converter-choice-card" onclick="enterConverterMode('scratch')">
            <div class="choice-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <rect x="3" y="3" width="18" height="18" rx="2"/>
                <line x1="12" y1="8" x2="12" y2="16"/>
                <line x1="8" y1="12" x2="16" y2="12"/>
              </svg>
            </div>
            <h2>Create</h2>
            <p>Build a new Daggerheart adversary from scratch</p>
          </button>
        </div>
      </div>

      <!-- Workspace State: Converter or Scratch Editor -->
      <div id="converterWorkspace" class="converter-workspace" style="display: none;">
        <header class="page-header">
          <div class="page-header-row">
            <button class="btn btn-secondary btn-back" onclick="exitConverterMode()" title="Back to selection">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
              </svg>
              Back
            </button>
            <h1 id="workspaceTitle">Convert</h1>
          </div>
          <p class="subtitle" id="workspaceSubtitle">Transform creatures from other TTRPGs into Daggerheart stat blocks</p>
          <div class="keyboard-hints" role="note" aria-label="Keyboard shortcuts" id="converterKeyboardHints">
            <span class="keyboard-hint"><kbd>Ctrl</kbd>+<kbd>Enter</kbd> Convert</span>
            <span class="keyboard-hint"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>C</kbd> Copy JSON</span>
            <span class="keyboard-hint"><kbd>Ctrl</kbd>+<kbd>Z</kbd> Undo</span>
            <span class="keyboard-hint"><kbd>Ctrl</kbd>+<kbd>Y</kbd> Redo</span>
            <span class="keyboard-hint"><kbd>Esc</kbd> Clear</span>
          </div>
        </header>

      <main id="main-content" class="main-grid">
      <!-- Input Panel (hidden in scratch mode) -->
      <div id="converterInputPanel" class="panel" role="region" aria-label="Input panel">
        <div class="panel-header">
          <span class="panel-title">
            TTRPG Stat Block
            <span id="draftIndicator" class="draft-indicator hidden" title="Draft auto-saved">Draft saved</span>
          </span>
          <div class="btn-group">
            <div class="recent-dropdown">
              <button class="btn btn-secondary btn-small" onclick="toggleRecentMenu()"
                      aria-haspopup="true" aria-expanded="false" id="recentBtn">
                Recent
              </button>
              <div class="recent-menu" id="recentMenu" role="menu" aria-labelledby="recentBtn">
                <div id="recentList"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- System Selector -->
        <div class="system-selector">
          <label class="form-label" for="systemSelect">Source System</label>
          <div class="system-selector-row">
            <select id="systemSelect" class="form-select" onchange="handleSystemChange()">
              <option value="auto">Auto-Detect</option>
              <option value="dnd5e">Modern d20 (5th Edition)</option>
              <option value="pf2e">3-Action Economy (2e)</option>
              <option value="dnd35e">Classic d20 (3.5 / 1e)</option>
              <option value="osr">OSR / Old-School</option>
            </select>
            <span id="detectedSystem" class="detected-system"></span>
          </div>
        </div>

        <!-- Sample Buttons by System -->
        <div class="sample-buttons" style="margin-bottom: 1rem;">
          <span style="font-size: 0.8rem; color: var(--text-secondary); margin-right: 0.5rem;">Samples:</span>
          <div class="btn-group" id="sampleButtons">
            <button class="btn btn-secondary sample-btn" onclick="loadSample('dnd5e', 'ogre')">Ogre</button>
            <button class="btn btn-secondary sample-btn" onclick="loadSample('dnd5e', 'wight')">Wight</button>
            <button class="btn btn-secondary sample-btn" onclick="loadSample('pf2e', 'ironscale')">Warrior</button>
            <button class="btn btn-secondary sample-btn" onclick="loadSample('osr', 'goblin')">Goblin</button>
          </div>
        </div>

        <!-- Mode Toggle -->
        <div class="mode-toggle" role="tablist" aria-label="Conversion mode">
          <button class="mode-btn active" role="tab" aria-selected="true" data-mode="single" onclick="setMode('single')">
            Single
          </button>
          <button class="mode-btn" role="tab" aria-selected="false" data-mode="batch" onclick="setMode('batch')">
            Batch (separate with ---)
          </button>
        </div>

        <div class="drop-zone" id="dropZone">
          <textarea
            id="inputText"
            aria-label="TTRPG stat block input"
            placeholder="Paste a creature stat block here, or drag & drop a .txt file...

For batch mode, separate multiple stat blocks with ---

Supports most popular TTRPG stat block formats.
The converter will auto-detect the source system."
            oninput="handleLiveParse()"></textarea>
        </div>

        <div class="btn-group" style="margin-top: 1rem;">
          <button class="btn btn-primary" onclick="convert()" id="convertBtn" aria-describedby="convertHint">
            Convert to Daggerheart
          </button>
          <button class="btn btn-secondary" onclick="clearAll()" aria-label="Clear all input and output">
            Clear
          </button>
          <span id="convertHint" class="sr-only">Press Ctrl+Enter to convert</span>
        </div>

        <!-- Live Parse Preview -->
        <div id="liveParsePreview" class="live-parse hidden" role="status" aria-live="polite">
          <div class="live-parse-title">
            <span class="pulse" aria-hidden="true">‚óè</span> Live Detection
          </div>
          <div class="live-parse-grid" id="liveParseGrid"></div>
          <div class="confidence-legend">
            <span class="confidence-legend-item"><span class="confidence-badge confidence-high" aria-hidden="true"></span> Detected</span>
            <span class="confidence-legend-item"><span class="confidence-badge confidence-medium" aria-hidden="true"></span> Inferred</span>
            <span class="confidence-legend-item"><span class="confidence-badge confidence-low" aria-hidden="true"></span> Not found</span>
          </div>
        </div>

        <!-- Adjustments -->
        <div id="adjustments" class="adjustments-section hidden">
          <div class="adjustments-title">Adjustments (Optional)</div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="overrideTier">Override Tier</label>
              <select id="overrideTier" class="form-select" onchange="reconvert()">
                <option value="">Auto-detect</option>
                <option value="1">Tier 1 (CR 0-1)</option>
                <option value="2">Tier 2 (CR 2-4)</option>
                <option value="3">Tier 3 (CR 5-10)</option>
                <option value="4">Tier 4 (CR 11+)</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label" for="overrideType">Override Type</label>
              <select id="overrideType" class="form-select" onchange="reconvert()">
                <option value="">Auto-detect</option>
                <option value="Bruiser">Bruiser (high HP, melee)</option>
                <option value="Horde">Horde (groups, weak)</option>
                <option value="Leader">Leader (commands allies)</option>
                <option value="Minion">Minion (1 HP, fodder)</option>
                <option value="Ranged">Ranged (attacks from distance)</option>
                <option value="Skulk">Skulk (stealth, ambush)</option>
                <option value="Social">Social (non-combat)</option>
                <option value="Solo">Solo (fights whole party)</option>
                <option value="Standard">Standard (balanced)</option>
                <option value="Support">Support (buffs/debuffs)</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Output Panel -->
      <div class="panel" role="region" aria-label="Output panel">
        <div class="panel-header">
          <span class="panel-title">Daggerheart Output</span>
          <div class="undo-toolbar">
            <button class="btn btn-icon btn-small" onclick="undo()" id="undoBtn" disabled
                    aria-label="Undo" title="Undo (Ctrl+Z)">
              <i class="fa-solid fa-rotate-left"></i>
            </button>
            <button class="btn btn-icon btn-small" onclick="redo()" id="redoBtn" disabled
                    aria-label="Redo" title="Redo (Ctrl+Y)">
              <i class="fa-solid fa-rotate-right"></i>
            </button>
          </div>
          <div class="btn-group output-actions">
            <!-- Copy Dropdown -->
            <div class="action-dropdown">
              <button class="btn btn-success btn-small" onclick="copyJSON()" id="copyBtn" disabled>
                <span class="btn-icon-inline">üìã</span> Copy
              </button>
              <button class="btn btn-success btn-small dropdown-toggle" onclick="toggleCopyMenu()" id="copyDropdownBtn" disabled aria-label="Copy options">‚ñæ</button>
              <div class="dropdown-menu" id="copyMenu">
                <button onclick="copyJSON(); closeCopyMenu()">JSON</button>
                <button onclick="copyMarkdown(); closeCopyMenu()">Markdown</button>
                <button onclick="copyText(); closeCopyMenu()">Plain Text</button>
              </div>
            </div>
            <button class="btn btn-secondary btn-small" onclick="downloadJSON()" id="downloadBtn" disabled title="Download JSON file">
              <span class="btn-icon-inline">‚¨á</span> Download
            </button>
            <button class="btn btn-share btn-small" onclick="saveAndPublish()" id="saveBtn" disabled title="Save to library and publish to community">
              <span class="btn-icon-inline">üíæ</span> Save
            </button>
            <button class="btn btn-share btn-small hidden" onclick="saveAllBatch()" id="saveAllBtn" disabled title="Save all converted adversaries to library">
              <span class="btn-icon-inline">üíæ</span> Save All
            </button>
            <!-- More Actions Dropdown -->
            <div class="action-dropdown">
              <button class="btn btn-secondary btn-small" onclick="toggleMoreMenu()" id="moreBtn" disabled title="More actions">
                ‚ãØ
              </button>
              <div class="dropdown-menu dropdown-menu-right" id="moreMenu">
                <button onclick="addConvertedToGroup(); closeMoreMenu()"><span>üìÅ</span> Add to Group</button>
                <button onclick="shareAsURL(); closeMoreMenu()"><span>üîó</span> Copy URL</button>
                <button onclick="window.print(); closeMoreMenu()"><span>üñ®</span> Print</button>
              </div>
            </div>
          </div>
          <!-- Hidden buttons for compatibility -->
          <button id="copyMdBtn" class="hidden" disabled></button>
          <button id="copyTextBtn" class="hidden" disabled></button>
          <button id="groupBtn" class="hidden" disabled></button>
          <button id="printBtn" class="hidden" disabled></button>
          <button id="urlBtn" class="hidden" disabled></button>
          <button id="libraryBtn" class="hidden" disabled></button>
          <button id="shareBtn" class="hidden" disabled></button>
        </div>

        <div class="tabs" role="tablist">
          <button class="tab active" onclick="switchTab('preview')" data-tab="preview" role="tab" aria-selected="true">
            Preview
          </button>
          <button class="tab hide-on-mobile" onclick="switchTab('json')" data-tab="json" role="tab" aria-selected="false">
            JSON
          </button>
          <button class="tab" onclick="switchTab('markdown')" data-tab="markdown" role="tab" aria-selected="false">
            Markdown
          </button>
          <button class="tab" onclick="switchTab('text')" data-tab="text" role="tab" aria-selected="false">
            Text
          </button>
        </div>

        <!-- Preview Tab -->
        <div id="previewTab" role="tabpanel">
          <div id="statBlockPreview" class="stat-block">
            <div class="empty-state">
              <div class="empty-state-icon" aria-hidden="true">‚öîÔ∏è</div>
              <div>Paste a stat block and press <kbd>Ctrl</kbd>+<kbd>Enter</kbd></div>
              <div style="margin-top: 0.5rem; font-size: 0.85rem;">or click "Convert to Daggerheart"</div>
            </div>
          </div>
        </div>

        <!-- JSON Tab -->
        <div id="jsonTab" class="hidden" role="tabpanel">
          <div id="jsonOutput" class="json-output">// JSON output will appear here after conversion</div>
        </div>

        <!-- Markdown Tab -->
        <div id="markdownTab" class="hidden" role="tabpanel">
          <div id="markdownOutput" class="markdown-output">Markdown output will appear here after conversion</div>
        </div>

        <!-- Text Tab -->
        <div id="textTab" class="hidden" role="tabpanel">
          <div id="textOutput" class="text-output">Text output will appear here after conversion</div>
        </div>
      </div>
    </main>
      </div><!-- /converterWorkspace -->
    </div><!-- /container -->
  </div><!-- /converterPage -->

  <!-- Community Library Page -->
  <div id="communityPage" class="page-view">
    <div class="community-page">
      <div class="community-header">
        <h1>Community</h1>
        <p>Browse and share adversaries created by the Forgeheart community</p>
      </div>

      <div class="community-container">
        <div class="community-filters-row" id="communityFilterTabs">
          <button class="filter-btn active" onclick="setCommunityFilter('all')" data-filter="all">All Conversions</button>
          <button class="filter-btn" onclick="setCommunityFilter('mine')" data-filter="mine" id="mySubmissionsBtn" style="display: none;">My Submissions</button>
        </div>
        <div class="community-filters">
          <input type="text" class="search-input" id="communitySearch" placeholder="Search conversions..." oninput="debounceCommunitySearch()">
          <button class="filter-select-btn" onclick="openFilterModal('tier')" id="tierFilterBtn">
            <span id="tierFilterLabel">All Tiers</span>
            <span class="filter-arrow">‚ñæ</span>
          </button>
          <button class="filter-select-btn" onclick="openFilterModal('type')" id="typeFilterBtn">
            <span id="typeFilterLabel">All Types</span>
            <span class="filter-arrow">‚ñæ</span>
          </button>
          <label class="srd-toggle" title="Include official Daggerheart SRD adversaries">
            <input type="checkbox" id="showSrdToggle" checked onchange="toggleSrdContent()">
            <span class="srd-toggle-label">SRD</span>
          </label>
          <select id="communitySort" class="form-select" onchange="loadCommunityConversions()">
            <option value="popular">Most Popular</option>
            <option value="newest">Newest</option>
            <option value="oldest">Oldest</option>
          </select>
        </div>

        <div id="communityList" class="community-list">
          <div class="community-empty">
            <p>Click "Community" in the nav to browse shared conversions.</p>
          </div>
        </div>

        <div id="communityPagination" class="community-pagination hidden">
          <button class="btn btn-secondary btn-small" onclick="communityPrevPage()" id="communityPrevBtn" disabled>Previous</button>
          <span id="communityPageInfo">Page 1 of 1</span>
          <button class="btn btn-secondary btn-small" onclick="communityNextPage()" id="communityNextBtn" disabled>Next</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Encounter Builder Page -->
  <div id="encounter-builderPage" class="page-view">
    <div class="encounter-builder-container">
      <!-- Tab Navigation for Builder/Combat toggle -->
      <div class="encounter-tabs" id="encounter-tabs">
        <button class="encounter-tab active" data-tab="builder" onclick="switchEncounterTab('builder')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="12" y1="18" x2="12" y2="12"/>
            <line x1="9" y1="15" x2="15" y2="15"/>
          </svg>
          Encounter Builder
        </button>
        <button class="encounter-tab" data-tab="combat" onclick="switchEncounterTab('combat')" id="combat-tab-btn" style="display: none;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 3v18M6 3v18M3 12h18M3 6h5M3 18h5M16 6h5M16 18h5"/>
          </svg>
          Combat Mode
          <span class="combat-active-indicator" id="combat-active-dot"></span>
        </button>
      </div>

      <!-- BUILDER VIEW -->
      <div class="encounter-view builder-view active" id="builder-view">
        <!-- Header with party size and budget -->
        <div class="encounter-header">
          <h2>Encounter Builder</h2>
        <div class="encounter-controls">
          <div class="party-size-control">
            <label>Party Size:</label>
            <button class="party-btn" onclick="adjustPartySize(-1)">‚àí</button>
            <span id="party-size-value">4</span>
            <button class="party-btn" onclick="adjustPartySize(1)">+</button>
          </div>
          <div class="budget-display">
            <span>Budget: <strong id="budget-total">14</strong> BP</span>
            <span class="budget-separator">|</span>
            <span>Used: <strong id="budget-used">0</strong> BP</span>
            <div class="budget-bar">
              <div class="budget-bar-fill" id="budget-bar-fill"></div>
            </div>
          </div>
        </div>
        <!-- Budget Adjustments -->
        <details class="encounter-adjustments">
          <summary>Budget Adjustments <span id="adjustment-summary">(+0)</span></summary>
          <div class="adjustment-options">
            <label class="adjustment-option">
              <input type="checkbox" id="adj-easier" onchange="updateBudgetAdjustments()">
              <span class="adjustment-label">Easier/shorter fight</span>
              <span class="adjustment-value">‚àí1 BP</span>
            </label>
            <label class="adjustment-option">
              <input type="checkbox" id="adj-multi-solo" onchange="updateBudgetAdjustments()">
              <span class="adjustment-label">Using 2+ Solo adversaries</span>
              <span class="adjustment-value">‚àí2 BP</span>
            </label>
            <label class="adjustment-option">
              <input type="checkbox" id="adj-damage-boost" onchange="updateBudgetAdjustments()">
              <span class="adjustment-label">+2 damage to all adversaries</span>
              <span class="adjustment-value">‚àí2 BP</span>
            </label>
            <label class="adjustment-option">
              <input type="checkbox" id="adj-lower-tier" onchange="updateBudgetAdjustments()">
              <span class="adjustment-label">Using lower tier adversary</span>
              <span class="adjustment-value">+1 BP</span>
            </label>
            <label class="adjustment-option">
              <input type="checkbox" id="adj-no-heavy" onchange="updateBudgetAdjustments()">
              <span class="adjustment-label">No Bruisers/ Hordes/ Leaders/ Solos</span>
              <span class="adjustment-value">+1 BP</span>
            </label>
            <label class="adjustment-option">
              <input type="checkbox" id="adj-harder" onchange="updateBudgetAdjustments()">
              <span class="adjustment-label">Harder/longer fight</span>
              <span class="adjustment-value">+2 BP</span>
            </label>
          </div>
        </details>
      </div>

      <!-- Two-column layout -->
      <div class="encounter-columns">
        <!-- Left: Library picker -->
        <div class="encounter-library-panel">
          <div class="encounter-panel-header">
            <h3>Your Collection</h3>
            <button class="btn btn-secondary btn-small" onclick="navigateTo('myLibrary')">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
              </svg>
              Go to Collection
            </button>
          </div>
          <input type="text" id="encounter-library-search"
                 placeholder="Search adversaries..."
                 oninput="debouncedFilterEncounterLibrary()">
          <div id="encounter-library-list" class="encounter-list"></div>
        </div>

        <!-- Right: Current encounter -->
        <div class="encounter-roster-panel">
          <h3>Current Encounter</h3>
          <input type="text" id="encounter-name"
                 placeholder="Encounter Name (optional)"
                 oninput="encounterState.name = this.value">
          <div id="encounter-roster" class="encounter-list encounter-drop-zone"
               ondragover="handleEncounterRosterDragOver(event)"
               ondragleave="handleEncounterRosterDragLeave(event)"
               ondrop="handleEncounterRosterDrop(event)"></div>
          <div class="encounter-total">
            Total: <strong id="encounter-total-bp">0</strong> BP
          </div>
          <div class="encounter-actions">
            <button class="btn btn-secondary" onclick="clearEncounter()">Clear</button>
            <button class="btn btn-primary" onclick="saveEncounter()">Save Encounter</button>
            <button class="btn btn-primary" onclick="startCombat()" id="start-combat-btn" style="background: #22c55e; border-color: #22c55e;">
              <i class="fas fa-play"></i> Start Combat
            </button>
          </div>
        </div>
      </div>

        <!-- Saved encounters section -->
        <div class="saved-encounters-section">
          <h3>Saved Encounters</h3>
          <div id="saved-encounters-list"></div>
        </div>
      </div><!-- End builder-view -->

      <!-- COMBAT VIEW -->
      <div class="encounter-view combat-view" id="combat-view">
        <div class="combat-mode" id="combat-mode">
        <div class="combat-header">
          <h2 class="combat-title" id="combat-encounter-name">Combat</h2>
          <div class="combat-pools">
            <div class="pool-tracker">
              <span class="pool-label fear">Fear</span>
              <div class="pool-controls">
                <button class="pool-btn" onclick="adjustFear(-1)">‚àí</button>
                <span class="pool-value fear" id="fear-value">0</span>
                <button class="pool-btn" onclick="adjustFear(1)">+</button>
              </div>
            </div>
          </div>
          <div class="combat-actions">
            <button class="btn btn-secondary" id="compress-toggle-btn" onclick="toggleCompressedCombat()"><i class="fas fa-compress-alt"></i> Compact</button>
            <button class="btn btn-secondary" onclick="undoCombatAction()"><i class="fas fa-undo"></i> Undo</button>
            <button class="btn btn-secondary" onclick="exportCombatSummary()"><i class="fas fa-file-export"></i> Export</button>
            <button class="btn btn-primary" onclick="endCombat()" style="background: #ef4444; border-color: #ef4444;">
              <i class="fas fa-stop"></i> End Combat
            </button>
          </div>
        </div>

        <div class="combat-grid">
          <div class="combat-adversaries" id="combat-adversaries">
            <!-- Combat cards rendered here -->
          </div>

          <div class="combat-sidebar">
            <!-- Combat Log -->
            <div class="combat-log">
              <div class="combat-log-title">
                <span>Combat Log</span>
                <button class="btn btn-secondary btn-small" onclick="clearCombatLog()">Clear</button>
              </div>
              <div class="combat-log-entries" id="combat-log-entries">
                <!-- Log entries rendered here -->
              </div>
            </div>
          </div>
        </div>
        </div><!-- End combat-mode -->
      </div><!-- End combat-view -->
    </div>
  </div>

  <!-- Leaderboard Page -->
  <div id="leaderboardPage" class="page-view">
    <div class="leaderboard-container">
      <div class="leaderboard-header">
        <h1>Leaderboard</h1>
        <p>Top contributors by community upvotes</p>
      </div>
      <div class="leaderboard-content">
        <div id="leaderboard-list" class="leaderboard-list">
          <div class="loading-spinner">Loading...</div>
        </div>
      </div>
    </div>
  </div>

  <!-- User Profile Page -->
  <div id="userProfilePage" class="page-view">
    <div class="user-profile-container">
      <div class="user-profile-header" id="user-profile-header">
        <div class="loading-spinner">Loading...</div>
      </div>
      <div class="user-profile-content">
        <div class="user-profile-filters">
          <select id="user-profile-sort" class="form-select" onchange="loadUserConversions()">
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
            <option value="popular">Most Popular</option>
            <option value="name">Name A-Z</option>
          </select>
        </div>
        <div id="user-profile-conversions" class="community-grid">
          <div class="loading-spinner">Loading...</div>
        </div>
        <div id="user-profile-pagination" class="pagination-controls"></div>
      </div>
    </div>
  </div>

  <!-- Admin Page -->
  <div id="adminPage" class="page-view admin-only">
    <div class="admin-page">
      <div class="admin-header">
        <h1>Admin Panel</h1>
        <p>Manage community conversions and users</p>
      </div>

      <!-- Stats Section -->
      <div class="admin-stats" id="adminStats">
        <div class="stat-card">
          <div class="stat-value" id="statUsers">-</div>
          <div class="stat-label">Total Users</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statConversions">-</div>
          <div class="stat-label">Conversions</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statVotes">-</div>
          <div class="stat-label">Total Votes</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statRecentConversions">-</div>
          <div class="stat-label">New (7 days)</div>
        </div>
      </div>

      <!-- Analytics Section -->
      <div class="admin-analytics" id="adminAnalytics">
        <div class="analytics-toggle">
          <button onclick="toggleAnalytics()">Show/Hide Analytics</button>
        </div>
        <div id="analyticsContent" style="display: none;">
          <div class="analytics-grid">
            <div class="chart-card">
              <h3>Conversions (30 days)</h3>
              <div class="chart-container">
                <canvas id="conversionsChart" class="chart-canvas"></canvas>
              </div>
            </div>
            <div class="chart-card">
              <h3>Users (30 days)</h3>
              <div class="chart-container">
                <canvas id="usersChart" class="chart-canvas"></canvas>
              </div>
            </div>
            <div class="chart-card">
              <h3>Reports (30 days)</h3>
              <div class="chart-container">
                <canvas id="reportsChart" class="chart-canvas"></canvas>
              </div>
            </div>
            <div class="chart-card">
              <h3>Votes (30 days)</h3>
              <div class="chart-container">
                <canvas id="votesChart" class="chart-canvas"></canvas>
              </div>
            </div>
          </div>

          <div class="suspicious-section">
            <h3>Suspicious Activity Monitor</h3>
            <div class="suspicious-grid">
              <div class="suspicious-card">
                <h4>High Activity Users (24h)</h4>
                <ul id="suspiciousHighActivity">
                  <li class="empty">None detected</li>
                </ul>
              </div>
              <div class="suspicious-card">
                <h4>Heavily Reported Content</h4>
                <ul id="suspiciousHeavilyReported">
                  <li class="empty">None detected</li>
                </ul>
              </div>
              <div class="suspicious-card">
                <h4>Recently Banned Users</h4>
                <ul id="suspiciousRecentBans">
                  <li class="empty">None</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tabs -->
      <div class="admin-tabs">
        <button class="admin-tab active" onclick="switchAdminTab('conversions')">Conversions</button>
        <button class="admin-tab" onclick="switchAdminTab('users')">Users</button>
        <button class="admin-tab" onclick="switchAdminTab('reports')" id="adminReportsTab">
          Reports <span class="admin-badge-count" id="pendingReportsBadge"></span>
        </button>
      </div>

      <!-- Conversions Tab -->
      <div id="adminConversionsTab" class="admin-tab-content">
        <div class="admin-toolbar">
          <input type="text" class="form-input admin-search" id="adminConversionSearch" placeholder="Search conversions or authors..." onkeyup="debounceAdminSearch('conversions')">
        </div>
        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Author</th>
                <th>Tier</th>
                <th>Type</th>
                <th>Score</th>
                <th>Status</th>
                <th>Created</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="adminConversionsBody">
              <tr><td colspan="8" class="loading">Loading...</td></tr>
            </tbody>
          </table>
        </div>
        <div class="admin-pagination" id="adminConversionsPagination"></div>
      </div>

      <!-- Users Tab -->
      <div id="adminUsersTab" class="admin-tab-content hidden">
        <div class="admin-toolbar">
          <input type="text" class="form-input admin-search" id="adminUserSearch" placeholder="Search users..." onkeyup="debounceAdminSearch('users')">
        </div>
        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>User</th>
                <th>Provider</th>
                <th>Conversions</th>
                <th>Votes</th>
                <th>Status</th>
                <th>Joined</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="adminUsersBody">
              <tr><td colspan="7" class="loading">Loading...</td></tr>
            </tbody>
          </table>
        </div>
        <div class="admin-pagination" id="adminUsersPagination"></div>
      </div>

      <!-- Reports Tab -->
      <div id="adminReportsTab" class="admin-tab-content hidden">
        <div class="admin-toolbar">
          <select class="form-select" id="adminReportStatusFilter" onchange="loadAdminReports(1)">
            <option value="all">All Reports</option>
            <option value="pending" selected>Pending</option>
            <option value="reviewed">Reviewed</option>
            <option value="dismissed">Dismissed</option>
            <option value="actioned">Actioned</option>
          </select>
        </div>
        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Conversion</th>
                <th>Reported By</th>
                <th>Reason</th>
                <th>Status</th>
                <th>Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="adminReportsBody">
              <tr><td colspan="6" class="loading">Loading...</td></tr>
            </tbody>
          </table>
        </div>
        <div class="admin-pagination" id="adminReportsPagination"></div>
      </div>
    </div>
  </div>

  <!-- My Library Page -->
  <div id="myLibraryPage" class="page-view">
    <div class="my-library-page">
      <div class="my-library-header">
        <h1>Collection</h1>
        <p>Drag and drop adversaries to organize them into groups</p>
      </div>

      <div class="my-library-container">
        <!-- Folders Sidebar -->
        <div class="folders-sidebar">
          <div class="folders-header">
            <span class="folders-title">Folders</span>
            <button class="folder-add-btn" onclick="createNewGroup()" title="New Folder">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"/>
              </svg>
            </button>
          </div>

          <div class="folders-tree" id="foldersTree">
            <!-- All Adversaries (root) -->
            <div class="folder-item folder-root active" data-folder="all" onclick="selectFolder('all')"
                 ondragover="handleFolderDragOver(event)" ondragleave="handleFolderDragLeave(event)" ondrop="handleFolderDrop(event, 'all')">
              <span class="folder-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"/>
                </svg>
              </span>
              <span class="folder-name">All Adversaries</span>
              <span class="folder-count" id="allCount">0</span>
            </div>

            <!-- User-created folders -->
            <div class="folders-list" id="foldersList">
              <!-- Folders populated by JavaScript -->
            </div>

            <!-- Ungrouped -->
            <div class="folder-item folder-ungrouped" data-folder="ungrouped" onclick="selectFolder('ungrouped')"
                 ondragover="handleFolderDragOver(event)" ondragleave="handleFolderDragLeave(event)" ondrop="handleFolderDrop(event, 'ungrouped')">
              <span class="folder-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2"/>
                  <path d="M9 9h6M9 15h6"/>
                </svg>
              </span>
              <span class="folder-name">Ungrouped</span>
              <span class="folder-count" id="ungroupedCount">0</span>
            </div>
          </div>

          <div class="folders-help">
            <small>Drag adversaries to folders to organize</small>
          </div>

          <div class="srd-toggle-container">
            <label class="srd-hide-toggle" title="Hide official Daggerheart SRD adversaries">
              <input type="checkbox" id="hideSrdToggle" onchange="toggleHideSrd()">
              <span class="srd-hide-label">Hide SRD</span>
            </label>
          </div>
        </div>

        <!-- Content Area -->
        <div class="library-content">
          <div class="library-content-header">
            <div class="library-title-section">
              <h2 id="currentFolderName">All Adversaries</h2>
              <span class="library-item-count" id="folderItemCount">(0 items)</span>
            </div>
            <div class="library-actions" id="folderActions">
              <button class="btn btn-primary" onclick="createNewAdversary()" title="Create a new adversary from scratch">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Create New
              </button>
              <input type="text" class="library-search" id="librarySearch" placeholder="Search..." oninput="filterLibraryItems()">
              <button class="filter-select-btn" onclick="openLibraryFilterModal('tier')" id="libraryTierFilterBtn">
                <span id="libraryTierFilterLabel">All Tiers</span>
                <span class="filter-arrow">‚ñæ</span>
              </button>
              <button class="filter-select-btn" onclick="openLibraryFilterModal('type')" id="libraryTypeFilterBtn">
                <span id="libraryTypeFilterLabel">All Types</span>
                <span class="filter-arrow">‚ñæ</span>
              </button>
              <select id="librarySort" class="form-select" onchange="filterLibraryItems()">
                <option value="name">Name A-Z</option>
                <option value="name-desc">Name Z-A</option>
                <option value="tier">Tier (Low-High)</option>
                <option value="tier-desc">Tier (High-Low)</option>
                <option value="type">Type</option>
              </select>
              <div class="folder-edit-actions" id="folderEditActions" style="display: none;">
                <button class="icon-btn" onclick="startRenameFolder()" title="Rename folder">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                  </svg>
                </button>
                <button class="icon-btn icon-btn-danger" onclick="deleteCurrentGroup()" title="Delete folder">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"/>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>

          <div class="library-items-container" id="libraryItemsContainer"
               ondragover="handleContainerDragOver(event)" ondrop="handleContainerDrop(event)">
            <div class="library-items" id="libraryItems">
              <!-- Items populated by JavaScript -->
            </div>
            <div class="library-empty-state" id="libraryEmptyState">
              <div class="empty-icon-large">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.4">
                  <path d="M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"/>
                </svg>
              </div>
              <p class="empty-title">No adversaries yet</p>
              <p class="empty-hint">Convert stat blocks or add from Community to get started</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add to Group Modal -->
  <div id="addToGroupModal" class="modal-overlay hidden" onclick="closeAddToGroupModal(event)">
    <div class="modal-content modal-small" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2>Add to Group</h2>
        <button class="modal-close" onclick="closeAddToGroupModal()">&times;</button>
      </div>
      <div class="modal-body">
        <p class="add-to-group-name" id="addToGroupAdversaryName"></p>
        <div class="group-select-list" id="groupSelectList">
          <!-- Groups populated by JavaScript -->
        </div>
        <div class="create-new-group-inline">
          <input type="text" id="newGroupNameInline" placeholder="Or create new group..." class="form-input">
          <button class="btn btn-success btn-small" onclick="createGroupAndAdd()">Create & Add</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Folder Picker Modal -->
  <div id="mobileFolderPicker" class="modal-overlay hidden" onclick="closeMobileFolderPicker(event)">
    <div class="modal-content modal-small" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2>Move to Folder</h2>
        <button class="modal-close" onclick="closeMobileFolderPicker()">&times;</button>
      </div>
      <div class="modal-body">
        <p class="mobile-picker-name" id="mobileFolderPickerName"></p>
        <div class="mobile-folder-list" id="mobileFolderList">
          <!-- Folders populated by JavaScript -->
        </div>
      </div>
    </div>
  </div>

  <!-- Adversary Detail Modal for My Library -->
  <div id="myLibraryModal" class="modal-overlay hidden" onclick="closeMyLibraryModal(event)">
    <div class="dh-modal-wrapper">
      <button class="dh-modal-close" onclick="closeMyLibraryModal()" aria-label="Close">&times;</button>
      <div class="dh-modal-card" onclick="event.stopPropagation()">
        <div id="myLibraryModalStatBlock"></div>
        <div class="dh-modal-footer">
          <div class="dh-modal-actions">
            <button class="btn hide-on-mobile" onclick="copyMyLibraryJSON()" title="Copy JSON">JSON</button>
            <button class="btn" onclick="moveToGroup()" title="Move to different group">Move</button>
            <button class="btn btn-danger" onclick="removeFromLibrary()" title="Remove from library">Remove</button>
            <button class="btn btn-danger hidden" id="deleteFromServerBtn" onclick="deleteFromServer()" title="Delete from community server">Delete from Server</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Community Detail Modal -->
  <div id="communityModal" class="modal-overlay hidden" onclick="closeCommunityModal(event)">
    <div class="dh-modal-wrapper">
      <button class="modal-save-star" id="modalSaveStar" onclick="toggleModalLibrarySave()" title="Save to library">‚òÜ</button>
      <button class="dh-modal-close" onclick="closeCommunityModal()" aria-label="Close">&times;</button>
      <div class="dh-modal-card" onclick="event.stopPropagation()">
        <div id="modalStatBlock"></div>
        <div class="dh-modal-footer">
          <div class="dh-modal-votes" id="modalVoteSection">
            <button class="vote-btn upvote" id="modalUpvoteBtn" onclick="voteOnConversion(1)" title="Upvote">&#9650;</button>
            <span class="vote-score" id="modalVoteScore">0</span>
            <button class="vote-btn downvote" id="modalDownvoteBtn" onclick="voteOnConversion(-1)" title="Downvote">&#9660;</button>
          </div>
          <div class="dh-modal-actions">
            <button class="btn" onclick="copyShareLink()" title="Copy share link">Share</button>
            <button class="btn hide-on-mobile" onclick="copyModalJSON()" title="Copy JSON">JSON</button>
            <button class="btn btn-save" onclick="addModalToLibrary()" title="Add to your library">Save</button>
            <button class="btn" onclick="addModalToGroup()" title="Add to a group">Group</button>
          </div>
          <div class="dh-modal-secondary">
            <span class="dh-modal-author" id="modalAuthor"></span>
            <div class="dh-modal-secondary-actions">
              <button class="dh-modal-delete hidden" id="modalDeleteBtn" onclick="deleteMyConversion()" title="Delete your submission">Delete</button>
              <button class="dh-modal-report" onclick="openReportModal()" title="Report this conversion">Report</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Report Modal -->
  <div id="reportModal" class="modal-overlay hidden" onclick="closeReportModal(event)">
    <div class="modal-content report-modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2>Report Conversion</h2>
        <button class="modal-close" onclick="closeReportModal()" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <p class="report-conversion-name" id="reportConversionName"></p>
        <label class="form-label" for="reportReason">Why are you reporting this?</label>
        <textarea id="reportReason" class="form-textarea" rows="4" placeholder="Please describe the issue (e.g., inappropriate content, copyright violation, spam, incorrect data...)"></textarea>
        <p class="report-hint">Reports are reviewed by moderators. Please provide enough detail for us to understand the issue.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeReportModal()">Cancel</button>
        <button class="btn btn-primary" onclick="submitReport()">Submit Report</button>
      </div>
    </div>
  </div>

  <!-- Privacy Policy Modal -->
  <div id="privacyModal" class="privacy-modal" onclick="if(event.target === this) closePrivacyModal()">
    <div class="privacy-modal-content">
      <button class="close-btn" onclick="closePrivacyModal()" aria-label="Close">&times;</button>
      <h2>Privacy Policy</h2>

      <h3>What We Collect</h3>
      <p>When you sign in with Discord, we store only the following public profile information:</p>
      <ul>
        <li><strong>Discord Username</strong> - To show who created each submission</li>
        <li><strong>Discord Avatar URL</strong> - To display your profile picture</li>
        <li><strong>Discord User ID</strong> - To recognize you when you return</li>
      </ul>

      <h3>What We Don't Collect</h3>
      <p>We do not collect, store, or have access to:</p>
      <ul>
        <li>Your email address</li>
        <li>Your password</li>
        <li>Your Discord messages or servers</li>
        <li>Any private Discord information</li>
      </ul>

      <h3>How Your Data Is Used</h3>
      <p>Your information is used solely to:</p>
      <ul>
        <li>Attribute your community submissions to you</li>
        <li>Allow you to edit or delete your own submissions</li>
        <li>Track your votes (one vote per conversion)</li>
      </ul>

      <h3>Data Security</h3>
      <p>Your data is stored in a secure database hosted on Fly.io infrastructure. We use industry-standard JWT tokens for authentication, stored in secure HTTP-only cookies.</p>

      <h3>Data Deletion</h3>
      <p>You can delete your submissions at any time. If you wish to have your account completely removed, contact us and we will delete all your data.</p>

      <h3>Third Parties</h3>
      <p>We do not sell, share, or transfer your data to any third parties. Your information stays between you and this application.</p>

      <p style="margin-top: 2rem; font-size: 0.8rem; opacity: 0.7;">Last updated: January 2026</p>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <p>Forgeheart is a fan-made tool and is not affiliated with, endorsed, or sponsored by Darrington Press, Wizards of the Coast, or Paizo Inc. All product names and trademarks are property of their respective owners.</p>
    <div class="footer-links">
      <a href="#" onclick="openFAQModal(); return false;">How It Works</a>
      <span class="footer-divider">|</span>
      <a href="#" onclick="openPrivacyModal(); return false;">Privacy</a>
      <span class="footer-divider">|</span>
      <a href="https://buymeacoffee.com/marcusu" target="_blank" rel="noopener" class="coffee-footer-link">
        Support Forgeheart
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
          <path d="M17 8h1a4 4 0 1 1 0 8h-1"/>
          <path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/>
          <line x1="6" y1="2" x2="6" y2="4"/>
          <line x1="10" y1="2" x2="10" y2="4"/>
          <line x1="14" y1="2" x2="14" y2="4"/>
        </svg>
      </a>
    </div>
    <div class="zs-credits" itemscope="" itemtype="https://schema.org/Organization">
      <a href="https://zealoussites.com" target="_blank" rel="noopener noreferrer nofollow" title="Website by Marcus Zeal @ Zealous Sites" aria-label="Website by Zealous Sites" itemprop="url">
        <span itemprop="name">
          Website by
          <svg height="20" viewBox="0 0 210 124" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M46.072 100V86.08L83.512 42.496L86.296 50.368H47.032V32.8H106.264V46.72L68.824 90.304L66.04 82.432H107.8V100H46.072ZM139.434 101.536C133.802 101.536 128.362 100.896 123.114 99.616C117.866 98.336 113.546 96.672 110.154 94.624L117.45 78.112C120.65 79.968 124.202 81.472 128.106 82.624C132.074 83.712 135.914 84.256 139.626 84.256C141.802 84.256 143.498 84.128 144.714 83.872C145.994 83.552 146.922 83.136 147.498 82.624C148.074 82.048 148.362 81.376 148.362 80.608C148.362 79.392 147.69 78.432 146.346 77.728C145.002 77.024 143.21 76.448 140.97 76C138.794 75.488 136.394 74.976 133.77 74.464C131.146 73.888 128.49 73.152 125.802 72.256C123.178 71.36 120.746 70.176 118.506 68.704C116.33 67.232 114.57 65.312 113.226 62.944C111.882 60.512 111.21 57.504 111.21 53.92C111.21 49.76 112.362 45.984 114.666 42.592C117.034 39.136 120.522 36.384 125.13 34.336C129.802 32.288 135.594 31.264 142.506 31.264C147.05 31.264 151.53 31.744 155.946 32.704C160.362 33.664 164.33 35.136 167.85 37.12L161.034 53.536C157.706 51.872 154.474 50.624 151.338 49.792C148.266 48.96 145.258 48.544 142.314 48.544C140.138 48.544 138.41 48.736 137.13 49.12C135.85 49.504 134.922 50.016 134.346 50.656C133.834 51.296 133.578 52 133.578 52.768C133.578 53.92 134.25 54.848 135.594 55.552C136.938 56.192 138.698 56.736 140.874 57.184C143.114 57.632 145.546 58.112 148.17 58.624C150.858 59.136 153.514 59.84 156.138 60.736C158.762 61.632 161.162 62.816 163.338 64.288C165.578 65.76 167.37 67.68 168.714 70.048C170.058 72.416 170.73 75.36 170.73 78.88C170.73 82.976 169.546 86.752 167.178 90.208C164.874 93.6 161.418 96.352 156.81 98.464C152.202 100.512 146.41 101.536 139.434 101.536Z" fill="currentColor"></path>
            <path d="M30.528 111.624C24.576 111.624 20.064 110.12 16.992 107.112C13.92 104.168 12.384 99.944 12.384 94.44V77.064C12.384 75.528 12 74.408 11.232 73.704C10.464 72.936 9.44 72.552 8.16 72.552H4.992V60.84H8.16C9.44 60.84 10.464 60.456 11.232 59.688C12 58.92 12.384 57.8 12.384 56.328V38.952C12.384 33.384 13.92 29.128 16.992 26.184C20.064 23.24 24.576 21.768 30.528 21.768H36.096V33.48H34.368C32.064 33.48 30.304 34.088 29.088 35.304C27.936 36.52 27.36 38.28 27.36 40.584V55.944C27.36 58.76 26.976 60.968 26.208 62.568C25.44 64.168 24.224 65.32 22.56 66.024C20.96 66.728 18.88 67.24 16.32 67.56V65.832C18.88 66.088 20.96 66.6 22.56 67.368C24.224 68.072 25.44 69.224 26.208 70.824C26.976 72.424 27.36 74.632 27.36 77.448V92.808C27.36 95.112 27.936 96.872 29.088 98.088C30.304 99.304 32.064 99.912 34.368 99.912H36.096V111.624H30.528Z" fill="currentColor"></path>
            <path d="M179.008 111.624H173.44V99.912H175.168C177.472 99.912 179.2 99.304 180.352 98.088C181.568 96.872 182.176 95.112 182.176 92.808V77.448C182.176 74.632 182.56 72.424 183.328 70.824C184.16 69.224 185.376 68.072 186.976 67.368C188.576 66.6 190.656 66.088 193.216 65.832V67.56C190.656 67.24 188.576 66.728 186.976 66.024C185.376 65.32 184.16 64.168 183.328 62.568C182.56 60.968 182.176 58.76 182.176 55.944V40.584C182.176 38.28 181.568 36.52 180.352 35.304C179.2 34.088 177.472 33.48 175.168 33.48H173.44V21.768H179.008C185.024 21.768 189.536 23.24 192.544 26.184C195.616 29.128 197.152 33.384 197.152 38.952V56.328C197.152 57.8 197.536 58.92 198.304 59.688C199.072 60.456 200.096 60.84 201.376 60.84H204.544V72.552H201.376C200.096 72.552 199.072 72.936 198.304 73.704C197.536 74.408 197.152 75.528 197.152 77.064V94.44C197.152 99.944 195.616 104.168 192.544 107.112C189.536 110.12 185.024 111.624 179.008 111.624Z" fill="currentColor"></path>
          </svg>
        </span>
      </a>
    </div>
  </footer>

  <!-- Toast -->
  <div id="toast" class="toast" role="alert" aria-live="assertive">
    <span class="toast-message" id="toastMessage"></span>
    <button class="toast-close" onclick="dismissToast()" aria-label="Dismiss notification">√ó</button>
    <div class="toast-progress" id="toastProgress"></div>
  </div>

  <!-- FAQ Modal -->
  <div id="faqModal" class="modal-overlay hidden" onclick="closeFAQModal(event)">
    <div class="modal-content faq-modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2>How Forgeheart Works</h2>
        <button class="modal-close" onclick="closeFAQModal()" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body faq-body">

        <section class="faq-section">
          <h3>Overview</h3>
          <p>This tool converts stat blocks from other popular TTRPGs into Daggerheart format. It analyzes the original creature's statistics and translates them into Daggerheart's streamlined adversary system.</p>
        </section>

        <section class="faq-section">
          <h3>How are Tiers determined?</h3>
          <p>Daggerheart uses a 4-tier system instead of Challenge Rating scales. The conversion maps CR to tier as follows:</p>
          <table class="faq-table">
            <thead>
              <tr><th>Challenge Rating</th><th>Daggerheart Tier</th></tr>
            </thead>
            <tbody>
              <tr><td>CR 0-1</td><td>Tier 1</td></tr>
              <tr><td>CR 2-4</td><td>Tier 2</td></tr>
              <tr><td>CR 5-10</td><td>Tier 3</td></tr>
              <tr><td>CR 11+</td><td>Tier 4</td></tr>
            </tbody>
          </table>
        </section>

        <section class="faq-section">
          <h3>How are Hit Points scaled?</h3>
          <p>Daggerheart uses much smaller HP pools than other d20 systems. Instead of directly converting HP, the tool assigns HP based on the creature's tier and type:</p>
          <table class="faq-table">
            <thead>
              <tr><th>Tier</th><th>Base HP</th></tr>
            </thead>
            <tbody>
              <tr><td>Tier 1</td><td>3 HP</td></tr>
              <tr><td>Tier 2</td><td>5 HP</td></tr>
              <tr><td>Tier 3</td><td>8 HP</td></tr>
              <tr><td>Tier 4</td><td>12 HP</td></tr>
            </tbody>
          </table>
          <p>Adversary types then modify this base HP. For example, Bruisers add +3 HP while Minions are always reduced to just 1 HP.</p>
        </section>

        <section class="faq-section">
          <h3>How is Difficulty set?</h3>
          <p>Difficulty is the target number players need to hit for attacks and ability checks against this adversary. It's determined purely by tier:</p>
          <table class="faq-table">
            <thead>
              <tr><th>Tier</th><th>Difficulty</th></tr>
            </thead>
            <tbody>
              <tr><td>Tier 1</td><td>11</td></tr>
              <tr><td>Tier 2</td><td>14</td></tr>
              <tr><td>Tier 3</td><td>17</td></tr>
              <tr><td>Tier 4</td><td>20</td></tr>
            </tbody>
          </table>
        </section>

        <section class="faq-section">
          <h3>How are Damage Thresholds calculated?</h3>
          <p>Damage thresholds determine when an adversary takes a Hit (Major threshold) or two Hits (Severe threshold). Base thresholds are set by tier:</p>
          <table class="faq-table">
            <thead>
              <tr><th>Tier</th><th>Major Threshold</th><th>Severe Threshold</th></tr>
            </thead>
            <tbody>
              <tr><td>Tier 1</td><td>7</td><td>12</td></tr>
              <tr><td>Tier 2</td><td>10</td><td>20</td></tr>
              <tr><td>Tier 3</td><td>20</td><td>32</td></tr>
              <tr><td>Tier 4</td><td>25</td><td>45</td></tr>
            </tbody>
          </table>
          <p>These are then modified by adversary type. Bruisers have 20% higher thresholds (harder to hurt), while Hordes have 20% lower thresholds (easier to damage).</p>
        </section>

        <section class="faq-section">
          <h3>How are Adversary Types chosen?</h3>
          <p>The converter analyzes the original creature to suggest the most appropriate Daggerheart adversary type:</p>
          <ul class="faq-list">
            <li><strong>Solo:</strong> Creatures with Legendary Actions become Solo adversaries (designed to fight an entire party)</li>
            <li><strong>Leader:</strong> High-CR creatures with Multiattack become Leaders (commanders that buff allies)</li>
            <li><strong>Bruiser:</strong> High-HP creatures (50+ HP) at CR 2+ become Bruisers (tough, close-quarters fighters)</li>
            <li><strong>Ranged:</strong> Creatures whose primary attack is ranged become Ranged adversaries</li>
            <li><strong>Skulk:</strong> Creatures with Stealth proficiency or ambush abilities become Skulks (hit-and-run tactics)</li>
            <li><strong>Support:</strong> Creatures with healing/buffing abilities at low CR become Support</li>
            <li><strong>Minion:</strong> Very low CR creatures (1/4 or less) become Minions (1 HP, defeated in groups)</li>
            <li><strong>Standard:</strong> Default for creatures that don't fit other categories</li>
          </ul>
        </section>

        <section class="faq-section">
          <h3>Type Modifiers</h3>
          <p>Each adversary type applies specific modifiers to the base statistics:</p>
          <table class="faq-table">
            <thead>
              <tr><th>Type</th><th>HP Mod</th><th>Stress Mod</th><th>Threshold Mod</th><th>Attack Mod</th></tr>
            </thead>
            <tbody>
              <tr><td>Bruiser</td><td>+3</td><td>+1</td><td>+20%</td><td>+0</td></tr>
              <tr><td>Horde</td><td>-1</td><td>+0</td><td>-20%</td><td>+0</td></tr>
              <tr><td>Leader</td><td>+1</td><td>+2</td><td>+10%</td><td>+1</td></tr>
              <tr><td>Minion</td><td>=1</td><td>+0</td><td>-50%</td><td>-1</td></tr>
              <tr><td>Ranged</td><td>-1</td><td>+0</td><td>-10%</td><td>+1</td></tr>
              <tr><td>Skulk</td><td>+0</td><td>+1</td><td>-10%</td><td>+0</td></tr>
              <tr><td>Social</td><td>-1</td><td>+2</td><td>-30%</td><td>-1</td></tr>
              <tr><td>Solo</td><td>+5</td><td>+3</td><td>+50%</td><td>+1</td></tr>
              <tr><td>Standard</td><td>+0</td><td>+0</td><td>+0%</td><td>+0</td></tr>
              <tr><td>Support</td><td>-1</td><td>+1</td><td>-20%</td><td>+0</td></tr>
            </tbody>
          </table>
        </section>

        <section class="faq-section">
          <h3>Damage Type Conversion</h3>
          <p>Many TTRPGs have numerous damage types. Daggerheart simplifies these into two categories:</p>
          <ul class="faq-list">
            <li><strong>Physical (phy):</strong> Slashing, Piercing, Bludgeoning</li>
            <li><strong>Magic (mag):</strong> Fire, Cold, Lightning, Acid, Poison, Necrotic, Radiant, Force, Psychic, Thunder</li>
          </ul>
        </section>

        <section class="faq-section">
          <h3>Range Conversion</h3>
          <p>Ranges in feet are converted to Daggerheart's abstract range bands:</p>
          <table class="faq-table">
            <thead>
              <tr><th>Source Range</th><th>Daggerheart Range</th></tr>
            </thead>
            <tbody>
              <tr><td>5 ft</td><td>Melee</td></tr>
              <tr><td>10 ft</td><td>Very Close</td></tr>
              <tr><td>11-30 ft</td><td>Close</td></tr>
              <tr><td>31-60 ft</td><td>Far</td></tr>
              <tr><td>60+ ft</td><td>Very Far</td></tr>
            </tbody>
          </table>
        </section>

        <section class="faq-section">
          <h3>Supported Input Formats</h3>
          <p>The converter accepts stat blocks in multiple formats:</p>
          <ul class="faq-list">
            <li><strong>Text:</strong> Copy-pasted stat blocks from PDFs, digital toolsets, VTTs, etc.</li>
            <li><strong>JSON:</strong> Most popular monster/creature JSON export formats are supported</li>
          </ul>
          <p>The system auto-detects the format - just paste and convert!</p>
        </section>

        <section class="faq-section">
          <h3>But these calculations SUCK!</h3>
          <p>You're kind of right. These calculations are not perfect for every adversary.</p>
          <p>A small fae may make more thematic sense to be difficult to hit. A beefy bruiser might be easy to hit but have a ton of HP. A cunning spellcaster might have low thresholds but dangerous abilities.</p>
          <p><strong>It is your job as the GM to edit these to fit your campaign.</strong></p>
          <p>I've given you the ability to edit every field after conversion and I highly recommend you do so to make the monster the best it can be. Use the converted stats as a starting point, then tweak the numbers until the adversary feels right for your table.</p>
        </section>

      </div>
    </div>
  </div>

  <!-- Load the modules -->
  <script src="/parsers/parser-manager.js"></script>
  <script src="/parsers/dnd5e-parser.js"></script>
  <script src="/parsers/pf2e-parser.js"></script>
  <script src="/parsers/dnd35e-parser.js"></script>
  <script src="/parsers/osr-parser.js"></script>
  <script src="/parsers/json-parser.js"></script>
  <script src="/dnd-parser.js"></script>
  <script src="/daggerheart-converter.js"></script>

  <script src="/js/app.js"></script>

  <!-- Fixed tooltip for dice rolls (escapes modal overflow) -->
  <div id="dice-tooltip"></div>
</body>
</html>
